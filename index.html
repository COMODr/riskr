<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Riskr by jbkunst</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Riskr</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/jbkunst/riskr" class="btn">View on GitHub</a>
      <a href="https://github.com/jbkunst/riskr/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jbkunst/riskr/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="riskr" class="anchor" href="#riskr" aria-hidden="true"><span class="octicon octicon-link"></span></a>riskr</h1>



<p><a href="https://travis-ci.org/jbkunst/riskr"><img src="https://api.travis-ci.org/jbkunst/riskr.svg" alt="travis-status"></a>
<a href="https://coveralls.io/github/jbkunst/riskr?branch=master"><img src="https://coveralls.io/repos/jbkunst/riskr/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a></p>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>The <code>riskr</code> package facilitate <em>credit scoring</em> tasks such as measure the scores/models performance and make easy the scoring modelling process.</p>

<p>There are function to:</p>

<ol>
<li>Measure in a simple way the performance of models via wrappers/shortcuts from ROCR functions.</li>
<li>Visualize relationships between variables.</li>
<li>Compute usual values in the credit scoring PSI, WOE, IV, KS, AUCROC, among others.</li>
<li>Make easier the modelling and validation process. </li>
</ol>

<h2>
<a id="assumptions" class="anchor" href="#assumptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assumptions</h2>

<p><code>riskr</code> assume the target variable is <em>binary</em> with numeric values: 0 and 1. Usually 1 means the characteristic of interest.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>You can install the latest development version from github with:</p>

<div class="highlight highlight-r"><pre><span class="pl-e">devtools</span><span class="pl-k">::</span>install_github(<span class="pl-s"><span class="pl-pds">"</span>jbkunst/riskr<span class="pl-pds">"</span></span>)</pre></div>

<h2>
<a id="functions" class="anchor" href="#functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Functions</h2>

<p>Usually we have a data frame with a <em>target</em> variable and a <em>score</em> (or probability) like this:</p>

<div class="highlight highlight-r"><pre>library(<span class="pl-s"><span class="pl-pds">"</span>riskr<span class="pl-pds">"</span></span>)

data(<span class="pl-s"><span class="pl-pds">"</span>predictions<span class="pl-pds">"</span></span>)

head(<span class="pl-smi">predictions</span>)</pre></div>

<table>
<thead>
<tr>
<th align="right">score</th>
<th align="right">target</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0.202</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">0.806</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">0.513</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">0.052</td>
<td align="right">0</td>
</tr>
<tr>
<td align="right">0.329</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">0.246</td>
<td align="right">0</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>
str(<span class="pl-smi">predictions</span>)
<span class="pl-c">## 'data.frame':    10000 obs. of  2 variables:</span>
<span class="pl-c">##  $ score : num  0.2023 0.8058 0.5134 0.0525 0.3288 ...</span>
<span class="pl-c">##  $ target: num  1 1 1 0 1 0 1 0 1 1 ...</span>

<span class="pl-smi">score</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">predictions</span><span class="pl-k">$</span><span class="pl-smi">score</span>

<span class="pl-smi">target</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">predictions</span><span class="pl-k">$</span><span class="pl-smi">target</span></pre></div>

<h3>
<a id="performance-indicators" class="anchor" href="#performance-indicators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance Indicators</h3>

<p>The main statistics or indicators are KS, AUCROC so:</p>

<div class="highlight highlight-r"><pre>ks(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)
<span class="pl-c">## [1] 0.254</span>

aucroc(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)
<span class="pl-c">## [1] 0.676</span>

gini(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)
<span class="pl-c">## [1] 0.353</span>

perf(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)</pre></div>

<table>
<thead>
<tr>
<th align="right">count</th>
<th align="right">target_count</th>
<th align="right">target_rate</th>
<th align="right">ks</th>
<th align="right">aucroc</th>
<th align="right">gini</th>
<th align="right">divergence</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">10000</td>
<td align="right">6990</td>
<td align="right">0.699</td>
<td align="right">0.254</td>
<td align="right">0.676</td>
<td align="right">0.353</td>
<td align="right">0.408</td>
</tr>
</tbody>
</table>

<p>There are some functions to plot the score/model performance (based on ggplot package).</p>

<div class="highlight highlight-r"><pre>plot_roc(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-4-1.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>
plot_gain(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-4-2.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>
plot_lift(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-4-3.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>
plot_dists(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>) <span class="pl-k">+</span>
  ggtitle(sprintf(<span class="pl-s"><span class="pl-pds">"</span>The KS statistics is %.0f%%<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span> <span class="pl-k">*</span> ks(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)))</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-4-4.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>
plot_ks(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>) <span class="pl-k">+</span> ggtitle(<span class="pl-s"><span class="pl-pds">"</span>Comparing ECDF<span class="pl-pds">"</span></span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-4-5.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>plot_perf(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-5-1.png" title="" alt=""></p>

<h3>
<a id="odds-tables" class="anchor" href="#odds-tables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Odds Tables</h3>

<p>The odds tables are other way to show how a score/model performs.</p>

<div class="highlight highlight-r"><pre><span class="pl-smi">score</span> <span class="pl-k">&lt;-</span> round(<span class="pl-smi">predictions</span><span class="pl-k">$</span><span class="pl-smi">score</span> <span class="pl-k">*</span> <span class="pl-c1">1000</span>)

odds_table(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>, <span class="pl-v">nclass</span> <span class="pl-k">=</span> <span class="pl-c1">5</span>) <span class="pl-c"># default is (nclass =) 10 groups of equal size</span></pre></div>

<table>
<thead>
<tr>
<th align="left">class</th>
<th align="right">count</th>
<th align="right">percent</th>
<th align="right">target_count</th>
<th align="right">target_rate</th>
<th align="right">target_percent</th>
<th align="right">non_target_count</th>
<th align="right">non_target_percent</th>
<th align="right">odds</th>
<th align="right">woe</th>
<th align="right">iv</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">[1,164]</td>
<td align="right">2009</td>
<td align="right">0.201</td>
<td align="right">1010</td>
<td align="right">0.503</td>
<td align="right">0.144</td>
<td align="right">999</td>
<td align="right">0.332</td>
<td align="right">1.01</td>
<td align="right">-0.832</td>
<td align="right">0.156</td>
</tr>
<tr>
<td align="left">(164,331]</td>
<td align="right">1991</td>
<td align="right">0.199</td>
<td align="right">1255</td>
<td align="right">0.630</td>
<td align="right">0.180</td>
<td align="right">736</td>
<td align="right">0.245</td>
<td align="right">1.71</td>
<td align="right">-0.309</td>
<td align="right">0.020</td>
</tr>
<tr>
<td align="left">(331,526]</td>
<td align="right">2008</td>
<td align="right">0.201</td>
<td align="right">1429</td>
<td align="right">0.712</td>
<td align="right">0.204</td>
<td align="right">579</td>
<td align="right">0.192</td>
<td align="right">2.47</td>
<td align="right">0.061</td>
<td align="right">0.001</td>
</tr>
<tr>
<td align="left">(526,738]</td>
<td align="right">2000</td>
<td align="right">0.200</td>
<td align="right">1573</td>
<td align="right">0.786</td>
<td align="right">0.225</td>
<td align="right">427</td>
<td align="right">0.142</td>
<td align="right">3.68</td>
<td align="right">0.461</td>
<td align="right">0.038</td>
</tr>
<tr>
<td align="left">(738,996]</td>
<td align="right">1992</td>
<td align="right">0.199</td>
<td align="right">1723</td>
<td align="right">0.865</td>
<td align="right">0.246</td>
<td align="right">269</td>
<td align="right">0.089</td>
<td align="right">6.41</td>
<td align="right">1.015</td>
<td align="right">0.159</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>
odds_table(<span class="pl-smi">score</span>, <span class="pl-smi">target</span>, <span class="pl-v">breaks</span> <span class="pl-k">=</span> c(<span class="pl-c1">0</span>, <span class="pl-c1">300</span>, <span class="pl-c1">700</span>, <span class="pl-c1">999</span>))</pre></div>

<table>
<thead>
<tr>
<th align="left">class</th>
<th align="right">count</th>
<th align="right">percent</th>
<th align="right">target_count</th>
<th align="right">target_rate</th>
<th align="right">target_percent</th>
<th align="right">non_target_count</th>
<th align="right">non_target_percent</th>
<th align="right">odds</th>
<th align="right">woe</th>
<th align="right">iv</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">(0,300]</td>
<td align="right">3675</td>
<td align="right">0.368</td>
<td align="right">2052</td>
<td align="right">0.558</td>
<td align="right">0.294</td>
<td align="right">1623</td>
<td align="right">0.539</td>
<td align="right">1.26</td>
<td align="right">-0.608</td>
<td align="right">0.149</td>
</tr>
<tr>
<td align="left">(300,700]</td>
<td align="right">3978</td>
<td align="right">0.398</td>
<td align="right">2926</td>
<td align="right">0.736</td>
<td align="right">0.419</td>
<td align="right">1052</td>
<td align="right">0.350</td>
<td align="right">2.78</td>
<td align="right">0.180</td>
<td align="right">0.012</td>
</tr>
<tr>
<td align="left">(700,999]</td>
<td align="right">2347</td>
<td align="right">0.235</td>
<td align="right">2012</td>
<td align="right">0.857</td>
<td align="right">0.288</td>
<td align="right">335</td>
<td align="right">0.111</td>
<td align="right">6.01</td>
<td align="right">0.950</td>
<td align="right">0.168</td>
</tr>
</tbody>
</table>

<h3>
<a id="confusion-matrix" class="anchor" href="#confusion-matrix" aria-hidden="true"><span class="octicon octicon-link"></span></a>Confusion Matrix</h3>

<p>The <code>conf_matrix</code> function return a list with the next elements:</p>

<div class="highlight highlight-r"><pre><span class="pl-smi">score_cat</span> <span class="pl-k">&lt;-</span> ifelse(<span class="pl-smi">score</span> <span class="pl-k">&lt;</span> <span class="pl-c1">500</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>)

<span class="pl-smi">cm</span> <span class="pl-k">&lt;-</span> conf_matrix(<span class="pl-smi">score_cat</span>, <span class="pl-smi">target</span>)</pre></div>

<ul>
<li>The confusion matrix:</li>
</ul>

<div class="highlight highlight-r"><pre><span class="pl-smi">cm</span><span class="pl-k">$</span><span class="pl-smi">confusion.matrix</span></pre></div>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">class</th>
<th align="right">pred 0</th>
<th align="right">pred 1</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">0</td>
<td align="left">true 0</td>
<td align="right">2230</td>
<td align="right">780</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">true 1</td>
<td align="right">3476</td>
<td align="right">3514</td>
</tr>
</tbody>
</table>

<ul>
<li>The confusion matrix statistics</li>
</ul>

<div class="highlight highlight-r"><pre><span class="pl-smi">cm</span><span class="pl-k">$</span><span class="pl-smi">indicators</span></pre></div>

<table>
<thead>
<tr>
<th align="left">term</th>
<th align="left">term.short</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Accuracy</td>
<td align="left">AC</td>
<td align="right">0.574</td>
</tr>
<tr>
<td align="left">Recall | True Positive rate (GG)</td>
<td align="left">Recall</td>
<td align="right">0.503</td>
</tr>
<tr>
<td align="left">False Positive rate</td>
<td align="left">FP</td>
<td align="right">0.259</td>
</tr>
<tr>
<td align="left">True Negative rate (BB)</td>
<td align="left">TN</td>
<td align="right">0.741</td>
</tr>
<tr>
<td align="left">False Negative rate</td>
<td align="left">FN</td>
<td align="right">0.497</td>
</tr>
<tr>
<td align="left">Precision</td>
<td align="left">P</td>
<td align="right">0.818</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>
<span class="pl-smi">cm</span><span class="pl-k">$</span><span class="pl-smi">indicators.t</span></pre></div>

<table>
<thead>
<tr>
<th align="right">AC</th>
<th align="right">Recall</th>
<th align="right">FP</th>
<th align="right">TN</th>
<th align="right">FN</th>
<th align="right">P</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0.574</td>
<td align="right">0.503</td>
<td align="right">0.259</td>
<td align="right">0.741</td>
<td align="right">0.497</td>
<td align="right">0.818</td>
</tr>
</tbody>
</table>

<h3>
<a id="bivariate-tables" class="anchor" href="#bivariate-tables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bivariate Tables</h3>

<div class="highlight highlight-r"><pre>data(<span class="pl-s"><span class="pl-pds">"</span>credit<span class="pl-pds">"</span></span>)

str(<span class="pl-smi">credit</span>)
<span class="pl-c">## 'data.frame':    49694 obs. of  17 variables:</span>
<span class="pl-c">##  $ id_client          : int  1 7 9 12 14 19 22 26 28 30 ...</span>
<span class="pl-c">##  $ sex                : chr  "F" "F" "F" "F" ...</span>
<span class="pl-c">##  $ marital_status     : chr  "O" "S" "S" "C" ...</span>
<span class="pl-c">##  $ age                : int  44 22 27 32 36 46 17 20 71 46 ...</span>
<span class="pl-c">##  $ flag_res_phone     : chr  "N" "Y" "Y" "Y" ...</span>
<span class="pl-c">##  $ area_code_res_phone: int  31 31 31 31 31 50 50 50 31 31 ...</span>
<span class="pl-c">##  $ payment_day        : int  12 12 20 12 12 12 12 12 18 8 ...</span>
<span class="pl-c">##  $ residence_type     : chr  "P" "A" "A" "P" ...</span>
<span class="pl-c">##  $ months_in_residence: int  12 0 0 24 120 360 12 12 96 72 ...</span>
<span class="pl-c">##  $ months_in_the_job  : int  48 48 0 0 36 120 12 24 12 12 ...</span>
<span class="pl-c">##  $ profession_code    : int  731 999 950 165 15 704 38 39 13 801 ...</span>
<span class="pl-c">##  $ flag_other_card    : chr  "N" "N" "N" "N" ...</span>
<span class="pl-c">##  $ flag_mobile_phone  : chr  "N" "N" "N" "N" ...</span>
<span class="pl-c">##  $ flag_contact_phone : chr  "N" "N" "N" "N" ...</span>
<span class="pl-c">##  $ personal_net_income: num  300 410 1000 700 1987 ...</span>
<span class="pl-c">##  $ quant_add_cards    : int  0 0 0 0 1 0 0 0 0 0 ...</span>
<span class="pl-c">##  $ bad                : int  0 0 1 0 0 0 1 1 0 0 ...</span>

ft(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">marital_status</span>)</pre></div>

<table>
<thead>
<tr>
<th align="left">class</th>
<th align="right">count</th>
<th align="right">percent</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">S</td>
<td align="right">25249</td>
<td align="right">0.508</td>
</tr>
<tr>
<td align="left">C</td>
<td align="right">17097</td>
<td align="right">0.344</td>
</tr>
<tr>
<td align="left">O</td>
<td align="right">2776</td>
<td align="right">0.056</td>
</tr>
<tr>
<td align="left">V</td>
<td align="right">2430</td>
<td align="right">0.049</td>
</tr>
<tr>
<td align="left">D</td>
<td align="right">2142</td>
<td align="right">0.043</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>
bt(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">marital_status</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>)</pre></div>

<table>
<thead>
<tr>
<th align="left">class</th>
<th align="right">count</th>
<th align="right">percent</th>
<th align="right">target_count</th>
<th align="right">target_rate</th>
<th align="right">target_percent</th>
<th align="right">non_target_count</th>
<th align="right">non_target_percent</th>
<th align="right">odds</th>
<th align="right">woe</th>
<th align="right">iv</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">C</td>
<td align="right">17097</td>
<td align="right">0.344</td>
<td align="right">2483</td>
<td align="right">0.145</td>
<td align="right">0.253</td>
<td align="right">14614</td>
<td align="right">0.366</td>
<td align="right">0.170</td>
<td align="right">-0.370</td>
<td align="right">0.042</td>
</tr>
<tr>
<td align="left">D</td>
<td align="right">2142</td>
<td align="right">0.043</td>
<td align="right">322</td>
<td align="right">0.150</td>
<td align="right">0.033</td>
<td align="right">1820</td>
<td align="right">0.046</td>
<td align="right">0.177</td>
<td align="right">-0.330</td>
<td align="right">0.004</td>
</tr>
<tr>
<td align="left">O</td>
<td align="right">2776</td>
<td align="right">0.056</td>
<td align="right">660</td>
<td align="right">0.238</td>
<td align="right">0.067</td>
<td align="right">2116</td>
<td align="right">0.053</td>
<td align="right">0.312</td>
<td align="right">0.237</td>
<td align="right">0.003</td>
</tr>
<tr>
<td align="left">S</td>
<td align="right">25249</td>
<td align="right">0.508</td>
<td align="right">6059</td>
<td align="right">0.240</td>
<td align="right">0.617</td>
<td align="right">19190</td>
<td align="right">0.481</td>
<td align="right">0.316</td>
<td align="right">0.249</td>
<td align="right">0.034</td>
</tr>
<tr>
<td align="left">V</td>
<td align="right">2430</td>
<td align="right">0.049</td>
<td align="right">289</td>
<td align="right">0.119</td>
<td align="right">0.029</td>
<td align="right">2141</td>
<td align="right">0.054</td>
<td align="right">0.135</td>
<td align="right">-0.600</td>
<td align="right">0.015</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>
library(<span class="pl-s"><span class="pl-pds">"</span>ggplot2<span class="pl-pds">"</span></span>)

<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">age_bin</span> <span class="pl-k">&lt;-</span> cut_interval(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">age</span>, <span class="pl-c1">3</span>)

bt(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">age_bin</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>)</pre></div>

<table>
<thead>
<tr>
<th align="left">class</th>
<th align="right">count</th>
<th align="right">percent</th>
<th align="right">target_count</th>
<th align="right">target_rate</th>
<th align="right">target_percent</th>
<th align="right">non_target_count</th>
<th align="right">non_target_percent</th>
<th align="right">odds</th>
<th align="right">woe</th>
<th align="right">iv</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">[15,41.7]</td>
<td align="right">35654</td>
<td align="right">0.717</td>
<td align="right">8174</td>
<td align="right">0.229</td>
<td align="right">0.833</td>
<td align="right">27480</td>
<td align="right">0.689</td>
<td align="right">0.297</td>
<td align="right">0.190</td>
<td align="right">0.027</td>
</tr>
<tr>
<td align="left">(41.7,68.3]</td>
<td align="right">13313</td>
<td align="right">0.268</td>
<td align="right">1585</td>
<td align="right">0.119</td>
<td align="right">0.162</td>
<td align="right">11728</td>
<td align="right">0.294</td>
<td align="right">0.135</td>
<td align="right">-0.599</td>
<td align="right">0.079</td>
</tr>
<tr>
<td align="left">(68.3,95]</td>
<td align="right">727</td>
<td align="right">0.015</td>
<td align="right">54</td>
<td align="right">0.074</td>
<td align="right">0.006</td>
<td align="right">673</td>
<td align="right">0.017</td>
<td align="right">0.080</td>
<td align="right">-1.121</td>
<td align="right">0.013</td>
</tr>
</tbody>
</table>

<div class="highlight highlight-r"><pre>plot_ba(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">age_bin</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-11-1.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>
<span class="pl-c"># order by odds</span>
<span class="pl-smi">lvls_rt</span> <span class="pl-k">&lt;-</span> bt(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">residence_type</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>) %<span class="pl-k">&gt;</span>% 
  arrange(desc(<span class="pl-smi">odds</span>)) %<span class="pl-k">&gt;</span>%  .[[<span class="pl-s"><span class="pl-pds">"</span>class<span class="pl-pds">"</span></span>]]

<span class="pl-smi">residence_type2</span> <span class="pl-k">&lt;-</span> <span class="pl-k">factor</span>(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">residence_type</span>, <span class="pl-v">levels</span> <span class="pl-k">=</span> <span class="pl-smi">lvls_rt</span>)

plot_ba(<span class="pl-smi">residence_type2</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-11-2.png" title="" alt=""></p>

<p>The minified version of <code>plot_ba</code></p>

<div class="highlight highlight-r"><pre>plot_ba2(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">age_bin</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>) <span class="pl-k">+</span> ggtitle(<span class="pl-s"><span class="pl-pds">"</span>Age<span class="pl-pds">"</span></span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-12-1.png" title="" alt=""></p>

<div class="highlight highlight-r"><pre>

plot_ba2(<span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">flag_res_phone</span>, <span class="pl-smi">credit</span><span class="pl-k">$</span><span class="pl-smi">bad</span>, <span class="pl-v">labels</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>) <span class="pl-k">+</span>
  ggtitle(<span class="pl-s"><span class="pl-pds">"</span>Flag Response Phone<span class="pl-pds">"</span></span>)</pre></div>

<p><img src="vignettes/figures/unnamed-chunk-12-2.png" title="" alt=""></p>

<h2>
<a id="related-work" class="anchor" href="#related-work" aria-hidden="true"><span class="octicon octicon-link"></span></a>Related work</h2>

<ol>
<li>
<a href="http://github.com/tomasgreif/woe">woe</a> package by <a href="http://github.com/tomasgreif">tomasgreif</a>
</li>
<li>
<a href="http://cran.r-project.org/web/packages/smbinning">smbinning</a> package by <a href="http://github.com/hjopia">Herman Jopia</a>. <a href="https://github.com/cran/smbinning">Github repository</a>.</li>
<li><a href="https://cran.r-project.org/doc/contrib/Sharma-CreditScoring.pdf">Guide to Credit Scoring in R</a></li>
<li><a href="https://cran.r-project.org/web/packages/gains/gains.pdf">Gains package</a></li>
</ol>

<h2>
<a id="session-info" class="anchor" href="#session-info" aria-hidden="true"><span class="octicon octicon-link"></span></a>Session Info</h2>

<div class="highlight highlight-r"><pre>library(<span class="pl-s"><span class="pl-pds">"</span>riskr<span class="pl-pds">"</span></span>)
library(<span class="pl-s"><span class="pl-pds">"</span>printr<span class="pl-pds">"</span></span>)
library(<span class="pl-s"><span class="pl-pds">"</span>ggplot2<span class="pl-pds">"</span></span>)
library(<span class="pl-s"><span class="pl-pds">"</span>ggthemes<span class="pl-pds">"</span></span>)
options(<span class="pl-v">digits</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>, <span class="pl-v">knitr.table.format</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>markdown<span class="pl-pds">"</span></span>)
<span class="pl-e">knitr</span><span class="pl-k">::</span><span class="pl-smi">opts_chunk</span><span class="pl-k">$</span>set(<span class="pl-v">collapse</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>, <span class="pl-v">warning</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>,
                      <span class="pl-v">fig.path</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>vignettes/figures/<span class="pl-pds">"</span></span>,
                      <span class="pl-v">fig.width</span> <span class="pl-k">=</span> <span class="pl-c1">6</span>, <span class="pl-v">fig.height</span> <span class="pl-k">=</span> <span class="pl-c1">6</span>,
                      <span class="pl-v">fig.align</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>center<span class="pl-pds">"</span></span>, <span class="pl-v">dpi</span> <span class="pl-k">=</span> <span class="pl-c1">72</span>)

theme_set(theme_fivethirtyeight(<span class="pl-v">base_size</span> <span class="pl-k">=</span> <span class="pl-c1">11</span>) <span class="pl-k">+</span>
            theme(<span class="pl-v">axis.title</span> <span class="pl-k">=</span> element_text(<span class="pl-v">colour</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>grey30<span class="pl-pds">"</span></span>),
                  <span class="pl-v">axis.title.y</span> <span class="pl-k">=</span> element_text(<span class="pl-v">angle</span> <span class="pl-k">=</span> <span class="pl-c1">90</span>),
                  <span class="pl-v">strip.background</span> <span class="pl-k">=</span> element_rect(<span class="pl-v">fill</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#434348<span class="pl-pds">"</span></span>),
                  <span class="pl-v">strip.text</span> <span class="pl-k">=</span> element_text(<span class="pl-v">color</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#F0F0F0<span class="pl-pds">"</span></span>),
                  <span class="pl-v">plot.title</span> <span class="pl-k">=</span> element_text(<span class="pl-v">face</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>plain<span class="pl-pds">"</span></span>, <span class="pl-v">size</span> <span class="pl-k">=</span> structure(<span class="pl-c1">1.2</span>, <span class="pl-v">class</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rel<span class="pl-pds">"</span></span>))))
update_geom_defaults(<span class="pl-s"><span class="pl-pds">"</span>line<span class="pl-pds">"</span></span>, <span class="pl-k">list</span>(<span class="pl-v">colour</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#434348<span class="pl-pds">"</span></span>, <span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">1.05</span>))
update_geom_defaults(<span class="pl-s"><span class="pl-pds">"</span>point<span class="pl-pds">"</span></span>, <span class="pl-k">list</span>(<span class="pl-v">colour</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#434348<span class="pl-pds">"</span></span>, <span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>))
update_geom_defaults(<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>, <span class="pl-k">list</span>(<span class="pl-v">fill</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#7cb5ec<span class="pl-pds">"</span></span>))
update_geom_defaults(<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>, <span class="pl-k">list</span>(<span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">4</span>, <span class="pl-v">colour</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>gray30<span class="pl-pds">"</span></span>))</pre></div>

<div class="highlight highlight-r"><pre>print(sessionInfo())
<span class="pl-c">## R version 3.2.0 (2015-04-16)</span>
<span class="pl-c">## Platform: i386-w64-mingw32/i386 (32-bit)</span>
<span class="pl-c">## Running under: Windows 7 (build 7601) Service Pack 1</span>
<span class="pl-c">## </span>
<span class="pl-c">## locale:</span>
<span class="pl-c">## [1] LC_COLLATE=Spanish_Chile.1252  LC_CTYPE=Spanish_Chile.1252   </span>
<span class="pl-c">## [3] LC_MONETARY=Spanish_Chile.1252 LC_NUMERIC=C                  </span>
<span class="pl-c">## [5] LC_TIME=Spanish_Chile.1252    </span>
<span class="pl-c">## </span>
<span class="pl-c">## attached base packages:</span>
<span class="pl-c">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="pl-c">## </span>
<span class="pl-c">## other attached packages:</span>
<span class="pl-c">##  [1] tidyr_0.2.0    plyr_1.8.3     dplyr_0.4.1    scales_0.2.5  </span>
<span class="pl-c">##  [5] ROCR_1.0-7     gplots_2.17.0  ggthemes_2.2.1 ggplot2_1.0.1 </span>
<span class="pl-c">##  [9] printr_0.0.4   riskr_1.0     </span>
<span class="pl-c">## </span>
<span class="pl-c">## loaded via a namespace (and not attached):</span>
<span class="pl-c">##  [1] Rcpp_0.11.6        knitr_1.10.5       magrittr_1.5      </span>
<span class="pl-c">##  [4] MASS_7.3-40        munsell_0.4.2      colorspace_1.2-6  </span>
<span class="pl-c">##  [7] stringr_1.0.0      highr_0.5          caTools_1.17.1    </span>
<span class="pl-c">## [10] tools_3.2.0        parallel_3.2.0     grid_3.2.0        </span>
<span class="pl-c">## [13] gtable_0.1.2       KernSmooth_2.23-14 DBI_0.3.1         </span>
<span class="pl-c">## [16] gtools_3.5.0       htmltools_0.2.6    lazyeval_0.1.10   </span>
<span class="pl-c">## [19] assertthat_0.1     yaml_2.1.13        digest_0.6.8      </span>
<span class="pl-c">## [22] reshape2_1.4.1     formatR_1.2        bitops_1.0-6      </span>
<span class="pl-c">## [25] evaluate_0.7       rmarkdown_0.7      labeling_0.3      </span>
<span class="pl-c">## [28] gdata_2.16.1       stringi_0.5-5      proto_0.3-10</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jbkunst/riskr">Riskr</a> is maintained by <a href="https://github.com/jbkunst">jbkunst</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

